<!--
 * Copyright 2017 IBM Corp. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the 'License'); you may not
 * use this file except in compliance with the License. You may obtain a copy of
 * the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations under
 * the License.
-->
<html>

<head>
    <base href="/">
    <title>Open Financial Cognitive Conversation</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta property="og:image" content="conversation.svg" />
    <meta property="og:title" content="Conversation Chat Simple" />
    <meta property="og:description" content="Sample application that shows how to use the Conversation API to identify user intents" />
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link href="https://netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/app.css">
    <link rel="stylesheet" href="css/chatwindow.css">
    <link rel="stylesheet" href="css/new_chat.css">
    <link rel="stylesheet" href="css/core.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.2/jspdf.debug.js"></script>
</head>

<body>

    <h2 class='text-center text-white'>Infolytx Chatbot</h2>
    <div id='chatbotBody' class='col-md-offset-1 col-md-10 col-sm-offset-1 col-sm-10 col-xs-12'>
        <div id='scrollingChat' class='padding'>
        </div>
        <div class='chatbot-input padding'>
            <textarea placeholder="Type your message here..." class="form-control full-width" id="userInputText"></textarea>
        </div>
        <div>
            <input type="submit" value="Send" id="sendBtn" />
        </div>

    </div>
    <script src="js/modal.js"></script>
    <script src="js/common.js"></script>
    <script src="js/api.js"></script>
    <script src="js/conversation.js"></script>
    <script src="js/global.js"></script>
    <script src="js/virtual_agent.js"></script>
    <!--<script type='text/javascript'>
        const BOT_ID = '243a9b97-ccd0-4e3f-81b5-b2261eb2d67b';
        const textInput = document.getElementById('userInputText');
        const submitBtn = document.getElementById('sendBtn');

        const SDK = require('@watson-virtual-agent/client-sdk');

        SDK.configure({
            XIBMClientID: '0ce76b82-89a0-4fed-8060-7686566b1a30',
            XIBMClientSecret: 'W5vE0bG4qE1dU2cX0nG8tE0lU2oX7pE0eG1jR6aB7nA8kY0eU6'
        });

        SDK.start(BOT_ID)
            .then(response => {
                const chatID = res.chatID;
                const onRequest = message => {
                    console.log('You:', message);
                };
                const onResponse = response => {
                    response.message.text.forEach(text => {
                        console.log('Agent:', text);
                    });
                };
                onResponse(response);
                submitBtn.addEventListener('click', () => {
                    const message = textInput.value;
                    onRequest(message);
                    SDK.send(BOT_ID, chatID, message)
                        .then(onResponse)
                        .catch(err => console.error(err));
                });
            })
            .catch(err => console.error(err));

        // SDK.send(botID, chatID, message)
        //     .then(response => {
        //         if (response.message.action) {
        //             var action = response.message.action;
        //             switch (action.name) {
        //                 case '<action-type>':
        //                     // Do some action
        //                     return SDK.send(botID, chatID, 'success');
        //                 case '<action-type>':
        //                     // Do some other action
        //                     return SDK.send(botID, chatID, 'success');
        //             }
        //         }
        //     })
        //     .catch(err => console.error(err));
    </script>-->
</body>

</html>